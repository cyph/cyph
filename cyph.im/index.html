<!DOCTYPE html>
<html class='no-js' ng-app='Cyph' ng-controller='CyphController'>
	<head>
		<meta charset='utf-8' />
		<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
		<link rel='manifest' href='/websign/manifest.json' />

		<title
			translate
			ng-bind='
				(
					ui.chat.scrollManager.unreadMessages > 0 ?
						("(" + ui.chat.scrollManager.unreadMessages + ") ") :
						""
				) +
				"Cyph â€“ Encrypted Messenger"
			'
		>
			Cyph &ndash; Encrypted Messenger
		</title>

		<meta
			translate
			name='description'
			content='Cyph is a next-generation messenger app that makes privacy the new status quo.'
		/>

		<meta
			name='viewport'
			content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'
		/>

		<meta name='apple-mobile-web-app-capable' content='yes' />
		<meta name='mobile-web-app-capable' content='yes' />

		<meta name='google' content='notranslate' />

		<link rel='icon' sizes='192x192' type='image/png' href='/img/favicon/favicon-192x192.png' />
		<link rel='icon' sizes='160x160' type='image/png' href='/img/favicon/favicon-160x160.png' />
		<link rel='icon' sizes='96x96' type='image/png' href='/img/favicon/favicon-96x96.png' />
		<link rel='icon' sizes='32x32' type='image/png' href='/img/favicon/favicon-32x32.png' />
		<link rel='icon' sizes='16x16' type='image/png' href='/img/favicon/favicon-16x16.png' />
		<link rel='apple-touch-icon' sizes='180x180' type='image/png' href='/img/favicon/apple-touch-icon-180x180.png' />
		<link rel='apple-touch-icon' sizes='152x152' type='image/png' href='/img/favicon/apple-touch-icon-152x152.png' />
		<link rel='apple-touch-icon' sizes='144x144' type='image/png' href='/img/favicon/apple-touch-icon-144x144.png' />
		<link rel='apple-touch-icon' sizes='120x120' type='image/png' href='/img/favicon/apple-touch-icon-120x120.png' />
		<link rel='apple-touch-icon' sizes='114x114' type='image/png' href='/img/favicon/apple-touch-icon-114x114.png' />
		<link rel='apple-touch-icon' sizes='76x76' type='image/png' href='/img/favicon/apple-touch-icon-76x76.png' />
		<link rel='apple-touch-icon' sizes='72x72' type='image/png' href='/img/favicon/apple-touch-icon-72x72.png' />
		<link rel='apple-touch-icon' sizes='60x60' type='image/png' href='/img/favicon/apple-touch-icon-60x60.png' />
		<link rel='apple-touch-icon' sizes='57x57' type='image/png' href='/img/favicon/apple-touch-icon-57x57.png' />
		<meta name='msapplication-TileColor' content='#8b62d9' />
		<meta name='msapplication-TileImage' content='/img/favicon/mstile-144x144.png' />

		<link rel='stylesheet' href='/css/loading.css' />

		<base target='_blank' />
	</head>
	<body>
		<section id='main' layout='column' layout-fill>
			<span
				cyph-chat-toolbar='ui.chat'
				open='ui.openMobileMenu()'
				show-chat='ui.state === Cyph.im.UI.States.chat'
				class='mobile-only'
			></span>
			<span
				cyph-chat-sidebar='ui.chat'
				show-chat='ui.state === Cyph.im.UI.States.chat'
				class='desktop-only'
			></span>

			<div
				cyph-chat-main='ui.chat'
				ng-show='ui.state === Cyph.im.UI.States.chat'
				layout='column'
				layout-fill
				flex
			>
				<div cyph-signup-form='ui.signupForm'>
					<div translate>
						Enjoying the service? Join our waitlist for Cyph v2!
					</div>
					<div translate>
						More details are on the way, but the next version of Cyph will include
						group messaging, user accounts, and encrypted chat history.
					</div>
				</div>
			</div>

			<div
				ng-view
				class='loading'
				layout='column'
				layout-fill
				flex
				ng-class='{active: ui.state === Cyph.im.UI.States.spinningUp}'
			>
				<div flex></div>
				<div class='logo-animation'>
					<img src='/img/logo.animated.gif' />
				</div>
				<div translate>Now spinning up your cyph room...</div>
				<div flex></div>
			</div>

			<div
				ng-view
				class='loading'
				layout='column'
				layout-fill
				flex
				ng-class='{
					active: ui.state === Cyph.im.UI.States.waitingForFriend
				}'
			>
				<div flex></div>
				<div class='logo-animation'>
					<img src='/img/logo.animated.gif' />
				</div>
				<div>
					<div translate>
						Just have your friend open this link, and we're good to go!
					</div>
					<br />

					<md-input-container id='copy-url-input' class='desktop-only'>
						<input ng-model='ui.copyUrl' aria-label='Cyph link' />
					</md-input-container>

					<div id='copy-url-mobile' class='mobile-only'>
						<a id='copy-url-link' ng-href='{{ui.copyUrl}}'>
							{{ui.copyUrl}}
						</a>
						<br />

						<md-button
							translate
							class='md-fab'
							aria-label='SMS'
						>
							<img src='/img/icons/sms.png' />
							<a
								target='_self'
								ng-href='sms:{{Cyph.Env.smsRecipient}}?body={{ui.copyUrlEncoded}}'
							></a>
						</md-button>

						<span class='divider'>
							&nbsp;
						</span>

						<md-button
							translate
							class='md-fab'
							aria-label='Email'
						>
							<img src='/img/icons/email.png' />
							<a
								target='_self'
								ng-href='mailto:?body={{ui.copyUrlEncoded}}'
							></a>
						</md-button>
					</div>

					<br />
					<div>
						<span translate>
							Link expires in
						</span>
						<timer
							id='timer'
							interval='1000'
							countdown='600'
							autostart='false'
							finish-callback='ui.chat.abortSetup()'
						>
							{{minutes}}:{{sseconds}}
						</timer>
					</div>
				</div>
				<div flex></div>
			</div>

			<div
				ng-view
				id='websign-changed'
				class='loading'
				layout='column'
				layout-fill
				flex
				ng-class='{
					active: ui.state === Cyph.im.UI.States.webSignChanged
				}'
			>
				<div flex></div>
				<div class='logo-animation'>
					<img src='/img/walken.png' />
				</div>
				<div>
					<p>
						<strong translate>WARNING:</strong>
						<span translate>Your copy of Cyph is invalid.</span>
					</p>
					<p>
						<span translate>
							It is likely that either our server has been compromised,
							or your personal computer is under attack.
						</span>
					</p>
					<p>
						<span translate>Therefore,</span>
						<strong translate>
							DO NOT refresh this page or otherwise continue to use Cyph.
						</strong>
						<br />
						<span translate>
							Doing so may expose you to malicious code written by
							nation-state-level hackers.
						</span>
					</p>
					<p>
						<a href='https://twitter.com/cyph'>Tweet at us</a>
						<span translate>and</span>
						<a ng-href='{{Cyph.Env.webSignWarningEmail}}'>
							email us immediately
						</a>;
						<span translate>
							we will investigate and advise you on how to proceed.
						</span>
					</p>
					<p>
						<span translate>(This</span>
						<i translate>may</i>
						<span translate>
							be a glitch in the Matrix, but assume
							otherwise until you hear back from us.)
						</span>
					</p>
				</div>
				<div flex></div>
			</div>

			<md-content
				ng-view
				id='error'
				flex
				class='nano'
				ng-class='{
					active: ui.state === Cyph.im.UI.States.error
				}'
			>
				<div class='nano-content'>
					<div>
						<h1 translate>
							I'm sorry, but your cyph is in another castle...
						</h1>
					</div>
					<img src='/img/404.png' />
					<div id='errorExplanation'>
						<p>
							<span translate>Please</span>
							<a
								translate
								target='_self'
								ng-href='{{Cyph.Env.newCyphUrl}}'
							>
								try again
							</a>.
						</p>
						<p translate>Reasons why you may have landed here:</p>
						<ul>
							<li translate>
								The cyph you're looking for has expired
							</li>
							<li translate>
								The cyph you're looking for has already been connected to
								(someone else got there first, or you clicked twice)
							</li>
							<li translate>
								A glitch in the matrix
							</li>
							<li translate>
								You're just guessing random URLs
							</li>
							<li translate>
								We broke something
							</li>
						</ul>
					</div>
				</div>
			</md-content>

			<div
				ng-view
				id='blank'
				flex
				ng-class='{
					active: ui.state === Cyph.im.UI.States.blank
				}'
			></div>

			<footer>
				<div
					cyph-chat-message-box='ui.chat'
					ng-show='ui.state === Cyph.im.UI.States.chat'
				></div>

				<div
					id='footer'
					class='desktop-only'
					ng-class='{
						center: ui.chat.state === Cyph.UI.Chat.States.chat
					}'
				>
					&copy; Cyph 2015
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

					<a href='https://twitter.com/cyph'>
						@cyph
					</a>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

					<a href='mailto:hello@cyph.com'>
						hello@cyph.com
					</a>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

					<a
						target='_self'
						href='tel:+19312974462'
						title='+1(931) 297 4462'
					>
						+1(931) CYPH INC
					</a>
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

					<a
						target='_self'
						href='bitcoin:1Cyph47AKhyG8mP9SPxd2ELTB2iGyJjfnd'
					>
						1Cyph47AKhyG8mP9SPxd2ELTB2iGyJjfnd
					</a>
				</div>
			</footer>
		</section>

		<div cyph-chat-cyphertext='ui.chat'></div>

		<div
			id='pre-load'
			ng-class='{
				"load-complete": ui.state !== Cyph.im.UI.States.none
			}'
		>
			<div class='double-bounce1'></div>
			<div class='double-bounce2'></div>
		</div>



		<link rel='stylesheet' href='/lib/bower_components/angular-material/angular-material.min.css' />
		<link rel='stylesheet' href='/lib/bower_components/nanoscroller/bin/css/nanoscroller.css' />
		<link rel='stylesheet' href='/lib/bower_components/magnific-popup/dist/magnific-popup.css' />
		<link rel='stylesheet' href='/lib/bower_components/highlight.js/src/styles/default.css' />

		<link rel='stylesheet' href='/css/fonts.css' />
		<link rel='stylesheet' href='/css/cyph.base.css' />
		<link rel='stylesheet' href='/css/cyph.im.css' />


		<script src='/lib/bower_components/jquery/dist/jquery.min.js'></script>
		<script src='/lib/bower_components/jquery_appear/jquery.appear.js'></script>
		<script src='/lib/bower_components/nanoscroller/bin/javascripts/jquery.nanoscroller.min.js'></script>
		<script src='/lib/bower_components/magnific-popup/dist/jquery.magnific-popup.min.js'></script>
		<script src='/lib/bower_components/angular/angular.min.js'></script>
		<script src='/lib/bower_components/angular-aria/angular-aria.min.js'></script>
		<script src='/lib/bower_components/angular-animate/angular-animate.min.js'></script>
		<script src='/lib/bower_components/angular-material/angular-material.min.js'></script>
		<script src='/lib/bower_components/markdown-it/dist/markdown-it.min.js'></script>
		<script src='/lib/bower_components/markdown-it-sup/dist/markdown-it-sup.min.js'></script>
		<script src='/lib/bower_components/highlight.js/build/highlight.pack.js'></script>
		<script src='/lib/bower_components/twemoji/twemoji.min.js'></script>
		<script src='/lib/bower_components/markdown-it-emoji/dist/markdown-it-emoji.min.js'></script>
		<script src='/lib/bower_components/angular-timer/dist/angular-timer.min.js'></script>
		<script src='/lib/bower_components/tabIndent.js/js/tabIndent.js'></script>
		<script src='/lib/bower_components/aws-sdk-js/dist/aws-sdk.min.js'></script>
		<script src='/cryptolib/hmac-sha256.js'></script>

		<script src='/js/cyph.im/main.js'></script>

		<script>
			/* No more inline scripts, now that application code has been loaded */

			Cyph.UI.Elements.head.append(
				"<meta http-equiv='Content-Security-Policy' content=\"script-src 'self' 'unsafe-eval'\" />"
			);
		</script>

	</body>
</html>
