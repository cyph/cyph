application: cyphme
module: cyph-im
version: prod
runtime: python27
api_version: 1
threadsafe: true

handlers:

# Main

- url: /
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /new
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /[A-Za-z0-9]{7}
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /404
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    X-Frame-Options: deny


# Translations

- url: /([a-z]{2})
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /([a-z]{2})/new
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /([a-z]{2})/[A-Za-z0-9]{7}
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /([a-z]{2})/404
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny


# Chinese translatons

- url: /(zh-CH[ST])
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /(zh-CH[ST])/new
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /(zh-CH[ST])/[A-Za-z0-9]{7}
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny

- url: /(zh-CH[ST])/404
  static_files: \1.html
  upload: \1.html
  secure: always
  http_headers:
    X-Frame-Options: deny


# Else

- url: /(.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    X-Frame-Options: deny
