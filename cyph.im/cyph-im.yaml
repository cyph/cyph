application: cyphme
module: cyph-im
version: prod
runtime: python27
api_version: 1
threadsafe: true

handlers:

# Cached resources

- url: /(lib/.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(img/.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(audio/.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(css/fonts/.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(css/preload.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(.*\.map)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(css/.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

- url: /(js/.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: public, max-age=0

# Main

- url: /
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /unsupportedbrowser
  static_files: unsupportedbrowser.html
  upload: unsupportedbrowser.html
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /new
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /[A-Za-z0-9]{7}
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /404
  static_files: index.html
  upload: index.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny


# Translations

- url: /(BALLS)
  static_files: \1.html
  upload: .*\.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /(BALLS)/new
  static_files: \1.html
  upload: .*\.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /(BALLS)/[A-Za-z0-9]{7}
  static_files: \1.html
  upload: .*\.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny

- url: /(BALLS)/404
  static_files: \1.html
  upload: .*\.html
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny


# Else

- url: /(.*)
  static_files: \1
  upload: .*
  secure: always
  http_headers:
    Cache-Control: no-store
    X-Frame-Options: deny
