(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof module!=="undefined"&&module.exports){module.exports=t()}else{e.Salsa20=t()}})(this,function(){function e(e,t){this.rounds=20;this.sigmaWords=[1634760805,857760878,2036477234,1797285236];this.keyWords=[];this.nonceWords=[0,0];this.counterWords=[0,0];this.block=[];this.blockUsed=64;this.setKey(e);this.setNonce(t)}e.prototype.setKey=function(e){for(var t=0,n=0;t<8;t++,n+=4){this.keyWords[t]=e[n]&255|(e[n+1]&255)<<8|(e[n+2]&255)<<16|(e[n+3]&255)<<24}this._reset()};e.prototype.setNonce=function(e){this.nonceWords[0]=e[0]&255|(e[1]&255)<<8|(e[2]&255)<<16|(e[3]&255)<<24;this.nonceWords[1]=e[4]&255|(e[5]&255)<<8|(e[6]&255)<<16|(e[7]&255)<<24;this._reset()};e.prototype.getBytes=function(e){var t=new Array(e);for(var n=0;n<e;n++){if(this.blockUsed==64){this._generateBlock();this._incrementCounter();this.blockUsed=0}t[n]=this.block[this.blockUsed];this.blockUsed++}return t};e.prototype.getHexString=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];var n=[];var r=this.getBytes(e);for(var i=0;i<r.length;i++){n.push(t[r[i]>>4&15]);n.push(t[r[i]&15])}return n.join("")};e.prototype._reset=function(){this.counterWords[0]=0;this.counterWords[1]=0;this.blockUsed=64};e.prototype._incrementCounter=function(){this.counterWords[0]=this.counterWords[0]+1&4294967295;if(this.counterWords[0]==0){this.counterWords[1]=this.counterWords[1]+1&4294967295}};e.prototype._generateBlock=function(){var e=this.sigmaWords[0],t=this.keyWords[0],n=this.keyWords[1],r=this.keyWords[2],i=this.keyWords[3],s=this.sigmaWords[1],o=this.nonceWords[0],u=this.nonceWords[1],a=this.counterWords[0],f=this.counterWords[1],l=this.sigmaWords[2],c=this.keyWords[4],h=this.keyWords[5],p=this.keyWords[6],d=this.keyWords[7],v=this.sigmaWords[3];var m=e,g=t,y=n,b=r,w=i,E=s,S=o,x=u,T=a,N=f,C=l,k=c,L=h,A=p,O=d,M=v;var _;for(var D=0;D<this.rounds;D+=2){_=m+L;w^=_<<7|_>>>32-7;_=w+m;T^=_<<9|_>>>32-9;_=T+w;L^=_<<13|_>>>32-13;_=L+T;m^=_<<18|_>>>32-18;_=E+g;N^=_<<7|_>>>32-7;_=N+E;A^=_<<9|_>>>32-9;_=A+N;g^=_<<13|_>>>32-13;_=g+A;E^=_<<18|_>>>32-18;_=C+S;O^=_<<7|_>>>32-7;_=O+C;y^=_<<9|_>>>32-9;_=y+O;S^=_<<13|_>>>32-13;_=S+y;C^=_<<18|_>>>32-18;_=M+k;b^=_<<7|_>>>32-7;_=b+M;x^=_<<9|_>>>32-9;_=x+b;k^=_<<13|_>>>32-13;_=k+x;M^=_<<18|_>>>32-18;_=m+b;g^=_<<7|_>>>32-7;_=g+m;y^=_<<9|_>>>32-9;_=y+g;b^=_<<13|_>>>32-13;_=b+y;m^=_<<18|_>>>32-18;_=E+w;S^=_<<7|_>>>32-7;_=S+E;x^=_<<9|_>>>32-9;_=x+S;w^=_<<13|_>>>32-13;_=w+x;E^=_<<18|_>>>32-18;_=C+N;k^=_<<7|_>>>32-7;_=k+C;T^=_<<9|_>>>32-9;_=T+k;N^=_<<13|_>>>32-13;_=N+T;C^=_<<18|_>>>32-18;_=M+O;L^=_<<7|_>>>32-7;_=L+M;A^=_<<9|_>>>32-9;_=A+L;O^=_<<13|_>>>32-13;_=O+A;M^=_<<18|_>>>32-18}m+=e;g+=t;y+=n;b+=r;w+=i;E+=s;S+=o;x+=u;T+=a;N+=f;C+=l;k+=c;L+=h;A+=p;O+=d;M+=v;this.block[0]=m>>>0&255;this.block[1]=m>>>8&255;this.block[2]=m>>>16&255;this.block[3]=m>>>24&255;this.block[4]=g>>>0&255;this.block[5]=g>>>8&255;this.block[6]=g>>>16&255;this.block[7]=g>>>24&255;this.block[8]=y>>>0&255;this.block[9]=y>>>8&255;this.block[10]=y>>>16&255;this.block[11]=y>>>24&255;this.block[12]=b>>>0&255;this.block[13]=b>>>8&255;this.block[14]=b>>>16&255;this.block[15]=b>>>24&255;this.block[16]=w>>>0&255;this.block[17]=w>>>8&255;this.block[18]=w>>>16&255;this.block[19]=w>>>24&255;this.block[20]=E>>>0&255;this.block[21]=E>>>8&255;this.block[22]=E>>>16&255;this.block[23]=E>>>24&255;this.block[24]=S>>>0&255;this.block[25]=S>>>8&255;this.block[26]=S>>>16&255;this.block[27]=S>>>24&255;this.block[28]=x>>>0&255;this.block[29]=x>>>8&255;this.block[30]=x>>>16&255;this.block[31]=x>>>24&255;this.block[32]=T>>>0&255;this.block[33]=T>>>8&255;this.block[34]=T>>>16&255;this.block[35]=T>>>24&255;this.block[36]=N>>>0&255;this.block[37]=N>>>8&255;this.block[38]=N>>>16&255;this.block[39]=N>>>24&255;this.block[40]=C>>>0&255;this.block[41]=C>>>8&255;this.block[42]=C>>>16&255;this.block[43]=C>>>24&255;this.block[44]=k>>>0&255;this.block[45]=k>>>8&255;this.block[46]=k>>>16&255;this.block[47]=k>>>24&255;this.block[48]=L>>>0&255;this.block[49]=L>>>8&255;this.block[50]=L>>>16&255;this.block[51]=L>>>24&255;this.block[52]=A>>>0&255;this.block[53]=A>>>8&255;this.block[54]=A>>>16&255;this.block[55]=A>>>24&255;this.block[56]=O>>>0&255;this.block[57]=O>>>8&255;this.block[58]=O>>>16&255;this.block[59]=O>>>24&255;this.block[60]=M>>>0&255;this.block[61]=M>>>8&255;this.block[62]=M>>>16&255;this.block[63]=M>>>24&255};return e})