(function(e){"use strict";function n(e){return function(){postMessage({method:e,args:Array.prototype.slice.call(arguments,0)})}}e.OTR={};e.crypto={randomBytes:function(){throw new Error("Haven't seeded yet.")}};var t=["vendor/salsa20.js","vendor/bigint.js","vendor/crypto.js","vendor/eventemitter.js","lib/const.js","lib/helpers.js","lib/sm.js"];var r;onmessage=function(i){var s=i.data;switch(s.type){case"seed":if(s.imports)t=s.imports;importScripts.apply(e,t);var o=new e.Salsa20(s.seed.slice(0,32),s.seed.slice(32));e.crypto.randomBytes=function(e){return o.getBytes(e)};break;case"init":r=new e.OTR.SM(s.reqs);["trust","question","send","abort"].forEach(function(e){r.on(e,n(e))});break;case"method":r[s.method].apply(r,s.args);break}}})(this)